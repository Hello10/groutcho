var e,t=require("react"),r=require("groutcho"),n=(e=require("prop-types"))&&"object"==typeof e&&"default"in e?e.default:e;function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=t.createContext();function i(e){var n=e.input,u=e.routes,i=e.redirects,c=e.web,a=e.onChange;function s(e){h(e),c&&window.history.pushState({},"",e)}var p=t.useState(function(){if(c){var e=window.location;return""+e.pathname+e.search}return"/"}()),f=p[0],h=p[1],d=t.useMemo(function(){var e=new r.Router({routes:u,redirects:i});return e.onChange(function(e){e!==f&&(s(e),a&&a(f))},n),e});t.useEffect(function(){if(!c)return function(){};function e(){h(f)}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}},[]);var v=d.match(o(o({},n),{},{url:f}));return v.redirect&&s(v.url),{match:v,router:d,url:f}}function c(e){var r=e.children,n=i({input:e.input,routes:e.routes,redirects:e.redirects,web:e.web,onChange:e.onChange});return t.createElement(u.Provider,{value:n.router},r({match:n.match}))}c.propTypes={input:n.object,routes:n.object,redirects:n.object,web:n.bool,children:n.func,onChange:n.func},exports.RouterContainer=c,exports.RouterContext=u,exports.useGo=function(){var e=t.useContext(u);return function(t){return e.go(t)}},exports.useRouter=i;
//# sourceMappingURL=index.js.map
